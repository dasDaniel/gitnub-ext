!function(){"use strict";const e="gitnub";let t={repos:[]},r=[];chrome.storage.local.get(e,(r=>{e in r&&(t=r.gitnub,t&&d())}));const o={from:null,to:null},c=".commit-ref.expandable.head-ref",s=".commit-ref.expandable:not(.head-ref)",n=".select-menu-button.branch";let a=!1;function l(){if(!window.location.toString().match(/\/compare\//))return;const[e,t]=document.querySelectorAll(n);o.from=t.querySelector("span.css-truncate-target").textContent,o.to=e.querySelector("span.css-truncate-target").textContent,u()}function i(){if(!window.location.toString().match(/pull\/\d*$/i))return;const e=document.querySelector(s),t=document.querySelector(c);t&&e&&(o.from=t.textContent,o.to=e.textContent,u())}function d(){a||Array.isArray(t.repos)&&(a=!0,r=t.repos.filter((e=>!!e.isActive&&!!window.location.toString().match(e.repo))),i(),l(),a=!1)}function u(){document.querySelectorAll(s).forEach((e=>{e.classList.remove("color-bg-danger"),e.classList.add("color-bg-success"),e.querySelectorAll("a").forEach((e=>{e.classList.remove("color-text-danger"),e.classList.add("color-text-success")}))})),function(){const[e,t]=document.querySelectorAll(n);e&&(e.classList.remove("btn-danger"),e.classList.remove("color-bg-danger"),e.classList.remove("color-text-danger"))}();let e=!1,t=!1,c=!1;r.forEach((r=>{let a=r.stages.find((e=>!!o.to.match(e.to)&&!!o.from.match(e.from)));a||(document.querySelectorAll(s).forEach((e=>{e.classList.add("color-bg-danger"),e.classList.remove("color-bg-success"),e.querySelectorAll("a").forEach((e=>{e.classList.add("color-text-danger"),e.classList.remove("color-text-success")}))})),function(){const[e,t]=document.querySelectorAll(n);e&&(e.classList.add("btn-danger"),e.classList.add("color-bg-danger"),e.classList.add("color-text-danger"))}()),a&&("rebase"===a.type&&(e=!0),"merge"===a.type&&(t=!0),"squash"===a.type&&(c=!0))})),!e&&document.querySelectorAll(".btn-group-rebase").forEach((e=>{e.classList.remove("btn-primary"),e.classList.add("btn-danger")})),!t&&document.querySelectorAll(".btn-group-merge").forEach((e=>{e.classList.remove("btn-primary"),e.classList.add("btn-danger")})),!c&&document.querySelectorAll(".btn-group-squash").forEach((e=>{e.classList.remove("btn-primary"),e.classList.add("btn-danger")}))}chrome.runtime.onMessage.addListener((e=>function(e){"redirect"===e.message&&i()}(e)));new MutationObserver((()=>d())).observe(document.body,{attributes:!1,childList:!0,subtree:!0})}();
